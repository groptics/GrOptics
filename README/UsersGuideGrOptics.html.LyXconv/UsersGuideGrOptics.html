<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>GrOptics User&#8217;s Guide
Version 4.0</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- html --> 
<meta name="src" content="UsersGuideGrOptics.tex"> 
<meta name="date" content="2017-01-13 09:31:00"> 
<link rel="stylesheet" type="text/css" href="UsersGuideGrOptics.css"> 
</head><body 
>
   <div class="maketitle">
                                                                  

                                                                  
                                                                  

                                                                  

<h2 class="titleHead">GrOptics User&#8217;s Guide<br />
Version 4.0</h2>
                 <div class="author" ><span 
class="cmr-12">Charlie Duke</span>
<br />               <span 
class="cmr-12">Grinnell College</span>
<br />             <span 
class="cmr-12">Grinnell, Iowa 50112</span>
<br />      <span 
class="cmr-12">duke@grinnell.edu </span><br class="and" /><span 
class="cmr-12">Akira Okumura</span>
<br />   <span 
class="cmr-12">Solar-Terrestrial Environment Laboratory</span>
<br />              <span 
class="cmr-12">Nagoya University</span>
<br /><span 
class="cmr-12">Furo-cho, Chikusa-ku, Nagoya 464-8601, Japan</span>
<br />                <span 
class="cmr-12">oxon@mac.com</span></div><br />
<div class="date" ><span 
class="cmr-12">January 11, 2017</span></div>
   </div><div 
class="abstract" 
>
<div class="center" 
>
<!--l. 42--><p class="noindent" >
<!--l. 42--><p class="noindent" ><span 
class="cmbx-9">Abstract</span></div>
     <!--l. 43--><p class="indent" >    <span 
class="cmr-9">GrOptics is a detailed simulation program for ray-tracing Cherenkov</span>
     <span 
class="cmr-9">photons through large arrays of atmospheric Cherenkov telescopes. Shower</span>
     <span 
class="cmr-9">packages,  such  as  GrISU  </span><span class="cite"><span 
class="cmr-9">[</span><a 
href="#XGRISU"><span 
class="cmr-9">2</span></a><span 
class="cmr-9">]</span></span>  <span 
class="cmr-9">and  CORSIKA  </span><span class="cite"><span 
class="cmr-9">[</span><a 
href="#XCORSIKA"><span 
class="cmr-9">3</span></a><span 
class="cmr-9">]</span></span><span 
class="cmr-9">,  provide  Cherenkov</span>
     <span 
class="cmr-9">photons after conversion to GrISU format. The output to a ROOT file</span>
     <span 
class="cmr-9">records  individual  photons  striking  the  camera  surface.  The  package</span>
     <span 
class="cmr-9">models  both  VERITAS  Davies-Cotton  (DC)  and  Schwarzchild-Coudee</span>
     <span 
class="cmr-9">(SC, SEGSC) telescopes with all telescope parameters taken from input</span>
     <span 
class="cmr-9">files. There is no limit to the number or type of array telescopes. Adding</span>
     <span 
class="cmr-9">new telescope types or input and output formats, is straightforward using</span>
     <span 
class="cmr-9">standard C++ coding techniques with existing base classes. Reference </span><span class="cite"><span 
class="cmr-9">[</span><a 
href="#XGROPTICS"><span 
class="cmr-9">1</span></a><span 
class="cmr-9">]</span></span>
     <span 
class="cmr-9">gives the GrOptics download site.</span>
</div>
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-10001"></a>Introduction</h3>
                                                                  

                                                                  
<!--l. 58--><p class="noindent" >GrOptics is a detailed C++ Monte Carlo ray-tracing program to study the passage of
atmospheric Cherenkov photons through telescopes designed to study atmospheric
Cherenkov air showers. Photons produced by standard air shower codes enter the
telescope; the output ROOT file contains tree records of the photons that strike the
telescope cameras. GrOptics provides the input to the CARE telescope electronics
code <span class="cite">[<a 
href="#XCARE">4</a>]</span>.
<!--l. 66--><p class="indent" >   There are no intrinsic limits to the number or type of telescopes placed in the air
Cherenkov telescope (ACT) array. Currently, the code contains three telescope
classes: for VERITAS DC telescopes, SC telescopes, and for SC telescopes with
segmented mirrors. Input pilot or configuration files contain all the array and
telescope parameters.
<!--l. 72--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-20001.1"></a>Installation</h4>
<!--l. 75--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-2002x1">GrOptics relies heavily on ROOT<span class="cite">[<a 
href="#XROOT">5</a>]</span>. I use the following installation
     method:
         <ul class="itemize1">
         <li class="itemize">Be sure you have installed gsl for use by ROOT
         </li>
         <li class="itemize">Download the ROOT source package <span class="cite">[<a 
href="#XROOT">5</a>]</span>
         </li>
         <li class="itemize">Follow package instructions to compile and link ROOT; it&#8217;s best not
         to specify a &#8211;prefix directory.
         </li>
         <li class="itemize">Setup  all  necessary  ROOT  environmental  variables  by  sourcing
         <span 
class="cmti-10">thisroot.sh </span>or <span 
class="cmti-10">thisroot.csh </span>in your <span 
class="cmmi-10">&#x003C;</span>rootDirectory<span 
class="cmmi-10">&#x003E;</span>/bin</li></ul>
     </li>
     <li 
  class="enumerate" id="x1-2004x2">The SC and SEGSC telescope classes use the ROBAST package <span class="cite">[<a 
href="#XROBAST">6</a>]</span>. ROBAST
     (ROot BAsed Simulator for ray Tracing) is a non-sequential ray tracing
     program which utilizes the 3D geometry library in ROOT. The ROBAST
     package is automatically downloaded by <span 
class="cmti-10">curl </span>within <span 
class="cmti-10">make </span>when producing the
     GrOptics executable. GrOptics currently uses ROBAST version 4.2.1
     which requires an edited source file to be compatible with GrOptics.
     The new file is copied using Makefile commands to the ROBAST src
     directory prior to compilation. These details should be transparent to all
     users.
     </li>
     <li 
  class="enumerate" id="x1-2006x3">After installing ROOT, download the GrOptics git repository <span class="cite">[<a 
href="#XGROPTICS">1</a>]</span>. Go to the
     GrOptics directory and run <span 
class="cmti-10">make </span>to produce the grOptics executable. The
     ROBAST download and file copy occurs during this step.
                                                                  

                                                                  
     </li>
     <li 
  class="enumerate" id="x1-2008x4">To test the installation, execute <span 
class="cmti-10">grOptics </span>from the GrOptics directory. The
     code will use the default configuration and pilot files and a test Cherenkov
     photon file, all within the GrOptics/Config directory, to produce an output root
     file, <span 
class="cmti-10">photonLocation.root</span>. Other test possibilities (see later sections)
     for using this configuration are telescope drawings and psf camera
     plots.</li></ol>
<!--l. 106--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.2   </span> <a 
 id="x1-30001.2"></a>QuickStart</h4>
<!--l. 110--><p class="noindent" >The <span 
class="cmti-10">grOptics </span>executable can use the configuration and pilot files and a test
Cherenkov photon file, all within the GrOptics/Config directory, downloaded with
the git repository. The file, <span 
class="cmti-10">opticsSimulation.pilot </span>steers the simulation and specifies
the output. The file, <span 
class="cmti-10">arrayConfig.cfg</span>, defines the ACT array. You&#8217;ll see the
downloaded file defines a four-telescope array that is compatible with the
<span 
class="cmti-10">photon.cph </span>test input Cherenkov photon file. The first telescope is a SEGSC
telescope; the remaining thre are DC telescopes. The parameters in these
files are documented both in these files and in following sections in this
document.
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-3002x1">Execute  the  grOptics  code  from  the  GrOptics  directory  to  produce
     <span 
class="cmti-10">photonLocation.root </span>as specified in <span 
class="cmti-10">opticsSimulation.pilot</span>. You&#8217;ll find the
     output trees with records of the photons on the camera surface for each
     telescope in this file. You&#8217;ll also find a history ROOT file for each telescope
     which documents the history of each photon incident onto the telescope
     (useful for debugging). You can turn off the creation of these history files
     by removing the leading asterisk of the <span 
class="cmti-10">PHOTONHIST </span>record.
     </li>
     <li 
  class="enumerate" id="x1-3004x2">To   create   an   <span 
class="cmti-10">opengl   </span>drawing   of   a   telescope   using   the   ROOT
     geometry  classes,  add  a  leading  asterisk  to  the  <span 
class="cmti-10">DRAWTEL </span>record  in
     <span 
class="cmti-10">opticsSimulation.pilot</span>, select the telescope, and execute <span 
class="cmti-10">grOptics</span>. Note
     that for DC telescopes, the code does not draw the mirror facets as the
     ray-tracing for the facets does not use the ROOT geometry classes. For
     SC and SEGSC telescopes, the ROOT geometry classes will draw the
     complete telescope, including photon ray-traces if you have selected that
     option.
     </li>
     <li 
  class="enumerate" id="x1-3006x3">To change telescope types, open the <span 
class="cmti-10">arrayConfig.cfg </span>file and activate the
     appropriate telescope factory record. Then, in the <span 
class="cmti-10">ARRAYTEL </span>records
     use the DC, SEGSC, or SC telescope types. You can then run the same
     tests as described above.
                                                                  

                                                                  
     </li>
     <li 
  class="enumerate" id="x1-3008x4">To  produce  a  series  of  spot  patterns  on  the  camera  using  internally
     produced photons, activate the <span 
class="cmti-10">TESTTEL </span>record in <span 
class="cmti-10">opticsSimulation.pilot</span>
     by adding a leading asterisk.</li></ol>
<!--l. 146--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-40002"></a>Code Overview</h3>
<!--l. 150--><p class="noindent" >See <span 
class="cmti-10">DevelopersGuideGrOptics.pdf  </span>for more details. This section only introduces
standard telescopes, telescope arrays, and the various coordinate systems used in
GrOptics.
<!--l. 154--><p class="indent" >   GrOptics uses standard C++ plus ROOT and the ROBAST package.
<!--l. 156--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.1   </span> <a 
 id="x1-50002.1"></a>Standard Telescopes</h4>
<!--l. 160--><p class="noindent" >The GrOptics package currently produces telescopes from each of three telescope
factories, for DC telescopes, SC telescopes and for SEGSC telescopes. All telescope
parameters are in configuration files to maintain maximum flexibility. However,
having separate configuration files for each array telescope leads to large,
unmanagable file sizes. Thus, the factories can produce a limited number of standard
telescopes based on configuration files in the <span 
class="cmti-10">GrOptics/Config </span>directory. The factories
then use edit records taken from the configuration files to change specific telescope
parameters, e.g. the mirror reflectivity, thus maintaining complete flexibility for
parameter selection for individual telescopes. The edit records use matlab
colon notation so that a single record may change a parameter for a range
of telescopes and elements within each telescope, e.g., facet reflectivities.
Edit records for additional parameters can easily be added. Currently, this
editing procedure is only possible for DC telescopes; I&#8217;ll add similar editing
later.
<!--l. 177--><p class="indent" >   None of the telescope dimensions or super structures may be edited. Changing
these dimensions requires a separate standard telescope.
<!--l. 180--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.2   </span> <a 
 id="x1-60002.2"></a>Telescope Arrays</h4>
<!--l. 182--><p class="noindent" >The telescope factories provide individual standard telescopes, after editing, to the
ACT array as defined by telescope type, standard ID number, ground location, and
pointing offset. Telescope numbering starts at 1, not 0.
<!--l. 187--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.3   </span> <a 
 id="x1-70002.3"></a>Coordinate Systems</h4>
                                                                  

                                                                  
<!--l. 189--><p class="noindent" >Understanding the coordinate systems used in our simulation codes is always
difficult, especially if your memory is as bad as mine. So, these descriptions should
help.
<!--l. 193--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.1   </span> <a 
 id="x1-80002.3.1"></a>GrISU Ground Coordinate System</h5>
<!--l. 195--><p class="noindent" >The GrISU Cherenkov files either from GrISU or from the CORSIKA I/O Reader use
the following coordinate system:
<!--l. 198--><p class="noindent" >&#x00A0;      x: East <br 
class="newline" />&#x00A0;      y: South <br 
class="newline" />&#x00A0;      z: Down <br 
class="newline" />to form a right-handed system
<!--l. 203--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.2   </span> <a 
 id="x1-90002.3.2"></a>GrOptics ground coordinate system</h5>
<!--l. 205--><p class="noindent" >The incoming GrISU produced incoming photons are immediately transformed by
GrOptics to the system:
<!--l. 208--><p class="noindent" >&#x00A0;      x: East <br 
class="newline" />&#x00A0;      y: North<br 
class="newline" />&#x00A0;      z: up<br 
class="newline" />forming a right-handed system. The telescope locations in the VERITAS GrISU
configuration file use this coordinate system.
<!--l. 214--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.3   </span> <a 
 id="x1-100002.3.3"></a>Telescope Coordinate System</h5>
<!--l. 216--><p class="noindent" >Each telescope has a coordinate system with origin at the telescope rotation point
and with z axis pointed toward the sky along the optic axis of the telescope. In stow
position (DC telescopes), the z axis is horizontal and pointed toward the North, the y
axis is down, and the x axis is toward the East. To point the telescope to a
given location on the sky, GrOptics first rotates the telescope about the
vertical through the azimuthal angle. Then, it raises the telescope about its
new x axis through the elevation angle. This new coordinate system is the
&#8221;telescope coordinate system&#8221;. Prior to injection into the GTelescope class, the
photons undergo a coordinate transformation to this telescope coordinate
system.
<!--l. 228--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.4   </span> <a 
 id="x1-110002.3.4"></a>Array Coordinate System</h5>
<!--l. 230--><p class="noindent" >Prior to added pointing misalignments, all telescopes point to the same
location on the sky with coordinate systems previously defined. The array
coordinate system is similarly defined, but its origin is at the origin of the
                                                                  

                                                                  
array.
<!--l. 235--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.5   </span> <a 
 id="x1-120002.3.5"></a>Camera Coordinate System</h5>
<!--l. 237--><p class="noindent" >For historical reasons, the camera coordinate system&#8217;s y axis is a reflection of the
y-axis of the telescope coordinate system. For the VERITAS telescope, stand in front
of the camera with the telescope in stow position. The camera y axis is up and the
camera x axis is to your right (to the East). The telescope y-axis is down; its x axis is
to the right.
<!--l. 244--><p class="indent" >   In the output tree of grOptics, the photon locations on the camera are in camera
coordinates for all telescope types. I&#8217;ll add an input flag later to select photon camera
locations in either telescope or camera coordinates.
<!--l. 249--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.6   </span> <a 
 id="x1-130002.3.6"></a>Azimuth, zenith angle, and elevation</h5>
<!--l. 251--><p class="noindent" >In all cases, the azimuthal angle is measured from the North toward the East. The
zenith angle and elevation are measured as usual.
<!--l. 254--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-140003"></a>Input Files</h3>
<!--l. 256--><p class="noindent" >The git repository contains input files for steering the simulation, setting up the
array, and defining the standard telescopes. These files have unique record flags and
can be self-referential for combining into single files.
<!--l. 261--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.1   </span> <a 
 id="x1-150003.1"></a>Simulation Steering</h4>
<!--l. 263--><p class="noindent" >The default input steering file is <span 
class="cmti-10">GrOptics/Config/opticsSimulation.pilot</span>. Execute
<span 
class="cmti-10">grOptics -h </span>so obtain command line options to use other filenames. The
<span 
class="cmti-10">opticsSimulation.pilot </span>file is fully documented. Much of the documentation is
reproduced here for completeness.
<!--l. 268--><p class="indent" >   The <span 
class="cmti-10">opticsSimulation.pilot </span>file contains the following records. Each record has a
leading asterisk (not reproduced here) when active. In the following list,
the bolded name is the record flag with the adjustable parameter listing
following.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">FILEIN</span> </dt><dd 
class="description"><span 
class="cmmi-10">&#x003C;</span>filename of GrISU-type file<span 
class="cmmi-10">&#x003E;</span>
     </dd><dt class="description">
<span 
class="cmbx-10">FILEOUT</span> </dt><dd 
class="description"><span 
class="cmmi-10">&#x003C;</span>root filename<span 
class="cmmi-10">&#x003E;&#x003C;</span>TreeName<span 
class="cmmi-10">&#x003E;&#x003C;</span>telBaseTreeName<span 
class="cmmi-10">&#x003E;&#x003C;</span>photonDirCosBranchFlag<span 
class="cmmi-10">&#x003E;</span>
                                                                  

                                                                  
         <div class="quote">
         <!--l. 278--><p class="noindent" ><span 
class="cmmi-10">&#x003C;</span>root filename<span 
class="cmmi-10">&#x003E;</span>: name of output data root file <br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>TreeName<span 
class="cmmi-10">&#x003E;</span>:  name  of  ROOT  tree  containing  parameters
         common to all photons <br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>telBaseTreeName<span 
class="cmmi-10">&#x003E;</span>: telescope number to be appended to this
         base tree name <br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>photonDirCosBranchFlag<span 
class="cmmi-10">&#x003E;</span>:   if   1,   add   dirCosineCamera
         branches.</div>
     </dd><dt class="description">
<span 
class="cmbx-10">LOGFILE</span> </dt><dd 
class="description"><span 
class="cmmi-10">&#x003C;</span>name of logfile<span 
class="cmmi-10">&#x003E;</span>
     </dd><dt class="description">
<span 
class="cmbx-10">NSHOWER</span> </dt><dd 
class="description"><span 
class="cmmi-10">&#x003C;</span>number Showers<span 
class="cmmi-10">&#x003E;&#x003C;</span>number Photons<span 
class="cmmi-10">&#x003E;</span>
         <div class="quote">
         <!--l. 295--><p class="noindent" ><span 
class="cmmi-10">&#x003C;</span>number Showers<span 
class="cmmi-10">&#x003E;</span>: <span 
class="cmmi-10">&#x003C;</span>0, no limit <br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>number Photons<span 
class="cmmi-10">&#x003E;</span>: <span 
class="cmmi-10">&#x003C;</span>0, no limit <br 
class="newline" /></div>
     </dd><dt class="description">
<span 
class="cmbx-10">ARRAYCONFIG</span> </dt><dd 
class="description"><span 
class="cmmi-10">&#x003C;</span>filename: default ./Config/arrayConfig.cfg<span 
class="cmmi-10">&#x003E;</span><br 
class="newline" />
     </dd><dt class="description">
<span 
class="cmbx-10">SEED</span> </dt><dd 
class="description"><span 
class="cmmi-10">&#x003C;</span>TRandom3 seed, default 0 : set by machine clock <span 
class="cmmi-10">&#x003E;</span><br 
class="newline" />
     </dd><dt class="description">
<span 
class="cmbx-10">WOBBLE</span> </dt><dd 
class="description"><span 
class="cmmi-10">&#x003C;</span>xSource<span 
class="cmmi-10">&#x003E;&#x003C;</span>ySource<span 
class="cmmi-10">&#x003E;&#x003C;</span>source Extension<span 
class="cmmi-10">&#x003E;&#x003C;</span>latitude<span 
class="cmmi-10">&#x003E;</span>
         <div class="quote">
         <!--l. 307--><p class="noindent" ><span 
class="cmmi-10">&#x003C;</span>xSource<span 
class="cmmi-10">&#x003E;&#x003C;</span>ySource<span 
class="cmmi-10">&#x003E;</span>: coordinates (deg) of source in field of
         view<br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>source Extension<span 
class="cmmi-10">&#x003E;</span>: source extension radius (deg) <span 
class="cmmi-10">&#x003C;</span><br 
class="newline" />latitude<span 
class="cmmi-10">&#x003E;</span>: latitude of observatory <br 
class="newline" />If the latitude is less than 90 degrees, the source position in x
         corresponds to an offset in the east west direction while the y
         position corresponds to north south. <br 
class="newline" />Example: <br 
class="newline" />wobble North: WOBBLE 0.0 0.5 0.0 31.675 <br 
class="newline" />wobble East : WOBBLE 0.5 0.0 0.0 31.675 <br 
class="newline" /></div>
     </dd><dt class="description">
<span 
class="cmbx-10">DRAWTEL</span> </dt><dd 
class="description"><span 
class="cmmi-10">&#x003C;&#x003C;</span>telescope number to draw<span 
class="cmmi-10">&#x003E;</span>, default 0 (no drawing)<span 
class="cmmi-10">&#x003E;</span><br 
class="newline" />
     </dd><dt class="description">
<span 
class="cmbx-10">TESTTEL</span> </dt><dd 
class="description"><span 
class="cmmi-10">&#x003C;</span>telescope number<span 
class="cmmi-10">&#x003E;&#x003C;</span>baseName for histograms <span 
class="cmmi-10">&#x003E;</span><br 
class="newline" />
     </dd><dt class="description">
<span 
class="cmbx-10">PHOTONHISTORY</span> </dt><dd 
class="description"><span 
class="cmmi-10">&#x003C;</span>ROOT filename, tel.number to be appended <span 
class="cmmi-10">&#x003E;&#x003C;</span>tree
     name<span 
class="cmmi-10">&#x003E;</span><br 
class="newline" />
     </dd></dl>
<!--l. 332--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.2   </span> <a 
 id="x1-160003.2"></a>Array Configuration</h4>
<!--l. 334--><p class="noindent" >The default array configuration filename, set in <span 
class="cmti-10">GrOptics/Config/opticsSimulation.pilot</span>,
is <span 
class="cmti-10">GrOptics/Config/arrayConfig.cfg</span>. This file specifies telescope locations, types, and
configuration files for standard telescopes. Edit records for individual telescopes
usually appear in this file. The <span 
class="cmti-10">arrayConfig.cfg </span>file is fully documented. Much of the
documentation is reproduced here for completeness.
<!--l. 341--><p class="indent" >   The array defined here may be a subset of the array used to create the photon
file.
<!--l. 347--><p class="indent" >
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">TELFAC</span> </dt><dd 
class="description">telescope factory type and parameters
     <!--l. 350--><p class="noindent" ><span 
class="cmmi-10">&#x003C;</span>factory type: DC, SEGSC, or SC <span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>photon reader type: GRISU (only option) <span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>configuration filename <span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>telescope edit filename <span 
class="cmmi-10">&#x003E;</span><br 
class="newline" />
     </dd><dt class="description">
<span 
class="cmbx-10">ARRAYTEL</span> </dt><dd 
class="description">parameters listed below
         <div class="quote">
         <!--l. 358--><p class="noindent" ><span 
class="cmmi-10">&#x003C;</span>telescope number, <span 
class="cmmi-10">&#x003E;</span>0 <span 
class="cmmi-10">&#x003E;</span>
    <div class="quote">
    <!--l. 360--><p class="noindent" >The array numbering need not be sequential and can
    be a subset of the array used to create the photon file.</div>
         <!--l. 363--><p class="noindent" ><span 
class="cmmi-10">&#x003C;</span>x telescope location (meters)<span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>y telescope location (meters)<span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>z telescope location (meters)<span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>pointing offset x <span 
class="cmmi-10">&#x003E;</span>: <span 
class="cmmi-10">&#x003E;</span>0 is left on tangent plane in degrees
         <br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>pointing offset y <span 
class="cmmi-10">&#x003E;</span>: <span 
class="cmmi-10">&#x003E;</span>0 is down on tangent plane in degrees
         <br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>telescope print mode <span 
class="cmmi-10">&#x003E;</span>: fully implemented for DC telescopes
         only
                                                                  

                                                                  
    <div class="quote">
    <!--l. 373--><p class="noindent" >0: no printing <br 
class="newline" />1: print summary information <br 
class="newline" />2: add geometry details <br 
class="newline" />3: add facet details <br 
class="newline" />
    </div>
         </div>
     </dd></dl>
<!--l. 384--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.3   </span> <a 
 id="x1-170003.3"></a>Telescope Parameter Editing</h4>
<!--l. 388--><p class="noindent" >The telescope editing records in the git repository are contained in the
<span 
class="cmti-10">arrayConfig.cfg </span>file. The editing flags are <span 
class="cmti-10">EDITDCTEL </span>for DC telescopes
and <span 
class="cmti-10">EDITSCTEL </span>for SC telescopes. Only the <span 
class="cmti-10">EDITDCTEL </span>are currently
implemented.
<!--l. 393--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.3.1   </span> <a 
 id="x1-180003.3.1"></a>Colon Numbering Notation</h5>
<!--l. 395--><p class="noindent" >The colon numbering notation (used in Matlab and Octave) is useful for containing
multiple entries in a single record. It is easily explained with several examples.
<br 
class="newline" />
<!--l. 399--><p class="indent" >
     <div class="quote">
     <!--l. 400--><p class="noindent" >[1 : 3] = [1<span style="margin-left:2.77695pt" class="tmspace"></span><span style="margin-left:2.77695pt" class="tmspace"></span>2<span style="margin-left:2.77695pt" class="tmspace"></span><span style="margin-left:2.77695pt" class="tmspace"></span>3] <br 
class="newline" />[1 : 3<span style="margin-left:2.77695pt" class="tmspace"></span><span style="margin-left:2.77695pt" class="tmspace"></span>5] = [1<span style="margin-left:2.77695pt" class="tmspace"></span><span style="margin-left:2.77695pt" class="tmspace"></span>2<span style="margin-left:2.77695pt" class="tmspace"></span><span style="margin-left:2.77695pt" class="tmspace"></span>3<span style="margin-left:2.77695pt" class="tmspace"></span><span style="margin-left:2.77695pt" class="tmspace"></span>5] <br 
class="newline" />
     </div>
<!--l. 404--><p class="noindent" >Thus, if the telescope number in an EDITDCTEL record is [1 : 3], the telescope
parameter changes defined on the remainer of the record will apply to telescope
numbers 1, 2, and 3. Similarly, if the telescope number is [4<span style="margin-left:2.77695pt" class="tmspace"></span><span style="margin-left:2.77695pt" class="tmspace"></span>5 : 8<span style="margin-left:2.77695pt" class="tmspace"></span><span style="margin-left:2.77695pt" class="tmspace"></span>10<span style="margin-left:2.77695pt" class="tmspace"></span><span style="margin-left:2.77695pt" class="tmspace"></span>11], the changes
will apply to telescopes 4, 5, 6, 7, 8, 10,and 11.
<!--l. 410--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.3.2   </span> <a 
 id="x1-190003.3.2"></a>DC Telescope Editing</h5>
                                                                  

                                                                  
<!--l. 412--><p class="noindent" >The edit records normally are placed in the <span 
class="cmti-10">arrayConfigure.cfg </span>file. These edit
records apply to specific telescopes, not to standard telescopes. The telescope
factories create the telescopes and then look for edit records specific to that
telescope.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">EDITDCTEL</span> </dt><dd 
class="description">DC telescope edit record
         <div class="quote">
         <!--l. 419--><p class="noindent" ><span 
class="cmmi-10">&#x003C;</span>telescope number (matlab notation)<span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>edit Flag1 <span 
class="cmmi-10">&#x003E;</span><span 
class="cmti-10">FACET </span>only current option <br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>facet number (matlab notation) <span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>edit Flag2 <span 
class="cmmi-10">&#x003E;</span><span 
class="cmti-10">align </span>or <span 
class="cmti-10">reflect </span>are current options
    <div class="quote">
    <!--l. 426--><p class="noindent" >Parameter following <span 
class="cmti-10">align </span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>maximum misalignment (degrees)<span 
class="cmmi-10">&#x003E;</span><br 
class="newline" />
    <!--l. 429--><p class="noindent" >Parameters following <span 
class="cmti-10">reflect </span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>blur radius <span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>mirror degradation factor <span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /><span 
class="cmmi-10">&#x003C;</span>reflective curve (int) <span 
class="cmmi-10">&#x003E;</span><br 
class="newline" /></div>
         </div>
     <!--l. 435--><p class="noindent" >Examples: <br 
class="newline" />EDITDCTEL [1:2] FACET [1:50] align 0.5 <br 
class="newline" />EDITDCTEL [5:10] FACET [10:100] reflect 0.2 0.95 2</dd></dl>
<!--l. 440--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.3.3   </span> <a 
 id="x1-200003.3.3"></a>SC Telescope Editing</h5>
<!--l. 442--><p class="noindent" >The edit records normally are placed in the <span 
class="cmti-10">arrayConfigure.cfg </span>file. These edit
records apply to specific telescopes, not to standard telescopes. The telescope
factories create the telescopes and then look for edit records specific to that
telescope.
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">EDITSCTEL</span> </dt><dd 
class="description">SC telescope edit record, no options implemented at present</dd></dl>
<!--l. 451--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.4   </span> <a 
 id="x1-210003.4"></a>Standard Telescopes</h4>
                                                                  

                                                                  
<!--l. 453--><p class="noindent" >The telescope DC and SC factories produce standard, editable telescopes
for the array. The standard telescope configuration files are given in the
<span 
class="cmti-10">arrayConfiguration.cfg </span>file.
<!--l. 460--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.1   </span> <a 
 id="x1-220003.4.1"></a>Davies-Cotton Telescopes</h5>
<!--l. 462--><p class="noindent" >At present, the only implemented DC telescope is the VERITAS telescope. Please be
careful about changing the dimensions of this telescope. In particular, the dimensions
and placements of the supporting quad arms and cross arms for the focus box are
tightly coupled to the telescope dimensions. The file, <span 
class="cmti-10">GrOptics/Config/veritas.cfg</span>,
defines 4 standard VERITAS telescopes, all with identical dimensions. The file
contains a series of records partially defining each of the 4 standard telescopes
followed by a sample, partial VERITAS telescope configuration file from the GrISU
VERITAS simulation package.
<!--l. 475--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.2   </span> <a 
 id="x1-230003.4.2"></a>Schwarzchild-Coudee Telescopes</h5>
<!--l. 483--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-240004"></a>Data Files</h3>
<!--l. 488--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.1   </span> <a 
 id="x1-250004.1"></a>Input Data Files</h4>
<!--l. 490--><p class="noindent" >The photon Cherenkov file begins with a header followed by photon lines (see
<span 
class="cmti-10">GrOptics/Config/photon.cph</span>. The header file contains information passed from
shower and photon production code. All header information must occur between
the initial HEADF flag and the final DATAF flag which indicates the start
of data records. The following data records are from the beginning of the
<span 
class="cmti-10">GrOptics/Config/photon.cph </span>file: <br 
class="newline" /><br 
class="newline" />R 1.000000 <br 
class="newline" />H 1307.645000 <br 
class="newline" />S 0.80000 50.0 -50.0 -0.2500 0.4330 1307.6 -1000 -10777 -32656 <br 
class="newline" />P -1.4 79.9 -0.2519 0.4403 13509.0 239.0 534 3 2 <br 
class="newline" />P -0.2 79.6 -0.2518 0.4402 13531.4 237.5 498 3 2 <br 
class="newline" />The <span 
class="cmti-10">R </span>record carries the photon thinning fraction. <br 
class="newline" />The <span 
class="cmti-10">H </span>record carries the observatory height in meters <br 
class="newline" />The <span 
class="cmti-10">S </span>record indicates the start of a new shower and contains information about the
primary in this order:
<!--l. 510--><p class="indent" >
                                                                  

                                                                  
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-25002x1">Primary energy in TeV
     </li>
     <li 
  class="enumerate" id="x1-25004x2">x coordinate of the core (meters)
     </li>
     <li 
  class="enumerate" id="x1-25006x3">y coordinate of the core (meters)
     </li>
     <li 
  class="enumerate" id="x1-25008x4">x-direction cosine of the core
     </li>
     <li 
  class="enumerate" id="x1-25010x5">y-direction cosine of the core
     </li>
     <li 
  class="enumerate" id="x1-25012x6">observatory height (meters)
     </li>
     <li 
  class="enumerate" id="x1-25014x7">three negative random-number seeds</li></ol>
<!--l. 519--><p class="noindent" >The <span 
class="cmti-10">P </span>record contains the Cherenkov photon details as follows:
<!--l. 523--><p class="indent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-25016x1">x-coordinate (meters) on the ground relative to an individual telescope at
     telescope level for CORSIKA or at ground level for KASCADE.
     </li>
     <li 
  class="enumerate" id="x1-25018x2">y-coordinate (meters) on the ground relative to an individual telescope at
     telescope level for CORSIKA or at ground level for KASCADE.
     </li>
     <li 
  class="enumerate" id="x1-25020x3">x-direction cosine in ground coordinates
     </li>
     <li 
  class="enumerate" id="x1-25022x4">y-direction cosine in ground coordinates
     </li>
     <li 
  class="enumerate" id="x1-25024x5">height (meters) of emission
     </li>
     <li 
  class="enumerate" id="x1-25026x6">relative time (nsecs) of emission
     </li>
     <li 
  class="enumerate" id="x1-25028x7">wavelength (nanometers)
     </li>
     <li 
  class="enumerate" id="x1-25030x8">particle type
     </li>
     <li 
  class="enumerate" id="x1-25032x9">telescope id number intercepting the photon</li></ol>
                                                                  

                                                                  
<!--l. 539--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.2   </span> <a 
 id="x1-260004.2"></a>Output Data Trees</h4>
<!--l. 543--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.2.1   </span> <a 
 id="x1-270004.2.1"></a>allTel Tree</h5>
<!--l. 545--><p class="noindent" >The allTel tree contains information that is constant for all showers in the file. The
tree branches are as follows:
<!--l. 549--><p class="indent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-27002x1">fileHeader string
     </li>
     <li 
  class="enumerate" id="x1-27004x2">globalEffic globalEffic/D
     </li>
     <li 
  class="enumerate" id="x1-27006x3">obsHgt obsHgt/D
     </li>
     <li 
  class="enumerate" id="x1-27008x4">telIDVector vector<span 
class="cmmi-10">&#x003C;</span>int<span 
class="cmmi-10">&#x003E;</span>
     </li>
     <li 
  class="enumerate" id="x1-27010x5">telLocXVector vector<span 
class="cmmi-10">&#x003C;</span>float<span 
class="cmmi-10">&#x003E;</span>
     </li>
     <li 
  class="enumerate" id="x1-27012x6">telLocYVector vector<span 
class="cmmi-10">&#x003C;</span>float<span 
class="cmmi-10">&#x003E;</span>
     </li>
     <li 
  class="enumerate" id="x1-27014x7">telLocZVector vector<span 
class="cmmi-10">&#x003C;</span>float<span 
class="cmmi-10">&#x003E;</span>
     </li>
     <li 
  class="enumerate" id="x1-27016x8">transitTimeVector vector<span 
class="cmmi-10">&#x003C;</span>float<span 
class="cmmi-10">&#x003E;</span></li></ol>
<!--l. 560--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.2.2   </span> <a 
 id="x1-280004.2.2"></a>Individual Telescope Tree</h5>
<!--l. 562--><p class="noindent" >Each telescope has its own tree. The branches are as follows:
<!--l. 565--><p class="indent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-28002x1">eventNumber eventNumber/i
     </li>
     <li 
  class="enumerate" id="x1-28004x2">primaryType primaryType/i
     </li>
     <li 
  class="enumerate" id="x1-28006x3">primaryEnergy primaryEnergy/F
                                                                  

                                                                  
     </li>
     <li 
  class="enumerate" id="x1-28008x4">Xcore Xcore/F
     </li>
     <li 
  class="enumerate" id="x1-28010x5">Ycore Ycore/F
     </li>
     <li 
  class="enumerate" id="x1-28012x6">Xcos Xcos/F
     </li>
     <li 
  class="enumerate" id="x1-28014x7">Ycos Ycos/F
     </li>
     <li 
  class="enumerate" id="x1-28016x8">Xsource Xsource/F
     </li>
     <li 
  class="enumerate" id="x1-28018x9">Ysource Ysource/F
     </li>
     <li 
  class="enumerate" id="x1-28020x10">delay delay/F
     </li>
     <li 
  class="enumerate" id="x1-28022x11">photonX vector<span 
class="cmmi-10">&#x003C;</span>float<span 
class="cmmi-10">&#x003E;</span>
     </li>
     <li 
  class="enumerate" id="x1-28024x12">photonY vector<span 
class="cmmi-10">&#x003C;</span>float<span 
class="cmmi-10">&#x003E;</span>
     </li>
     <li 
  class="enumerate" id="x1-28026x13">time vector<span 
class="cmmi-10">&#x003C;</span>float<span 
class="cmmi-10">&#x003E;</span>
     </li>
     <li 
  class="enumerate" id="x1-28028x14">wavelength vector<span 
class="cmmi-10">&#x003C;</span>float<span 
class="cmmi-10">&#x003E;</span></li></ol>
<!--l. 585--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-290005"></a>Graphical Output Options</h3>
<!--l. 593--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">6   </span> <a 
 id="x1-300006"></a>Appendices</h3>
<!--l. 595--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.1   </span> <a 
 id="x1-310006.1"></a>Formats for this file</h4>
<!--l. 597--><p class="noindent" >I created this users guide using lyx to produce a .lyx file (lyx is a nice gui based tex
editor). The .tex file is exported from lyx using the latex(plain) option. The html file
is created by htlatex from this .tex file, i.e. &#8220;htlatex UsersGuideGrOptics.tex&#8221;. The
pdf file is exported from lyx via the export pdflatex option. All of this on
osx.
                                                                  

                                                                  
   <h3 class="likesectionHead"><a 
 id="x1-320006.1"></a>References</h3>
<!--l. 603--><p class="noindent" >
   <div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 [1]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XGROPTICS"></a>GrOptics git repository (read only) <br 
class="newline" />git clone http://gtlib.gatech.edu/pub/IACT/GrOptics.git
   </p>
   <p class="bibitem" ><span class="biblabel">
 [2]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XGRISU"></a>GrISU download site <br 
class="newline" />http://www.physics.utah.edu/gammaray/GrISU/
   </p>
   <p class="bibitem" ><span class="biblabel">
 [3]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XCORSIKA"></a>CORSIKA: A Monte Carlo Code to Simulate Extensive Air Showers<br 
class="newline" />D. Heck, J. Knapp, J.N. Capdevielle, G. Schatz, T. Thouw <br 
class="newline" />Forschungszentrum Karlsruhe Report FZKA 6019 (1998)
   </p>
   <p class="bibitem" ><span class="biblabel">
 [4]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XCARE"></a>CARE git repository (read only) <br 
class="newline" />git clone http://gtlib.gatech.edu/pub/IACT/CARE.git
   </p>
   <p class="bibitem" ><span class="biblabel">
 [5]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XROOT"></a>Rene Brun and Fons Rademakers,<br 
class="newline" />ROOT - An Object Oriented Data Analysis Framework,<br 
class="newline" />Proceedings AIHENP&#8217;96 Workshop, Lausanne, Sep. 1996, <br 
class="newline" />Nucl. Inst. &amp; Meth. in Phys. Res. A 389 (1997) 81-86. <br 
class="newline" />See also http://root.cern.ch/drupal/
   </p>
   <p class="bibitem" ><span class="biblabel">
 [6]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XROBAST"></a>Development  of  Non-sequential  Ray-tracing  Software  for  Cosmic-ray
   Telescopes Authors: Akira Okumura, Masaaki Hayashida, Hideaki Katagiri,
   Takayuki    Saito,    Vladimir    Vassiliev.    http://arxiv.org/abs/1110.4448
   Download site http://sourceforge.net/projects/robast/</p></div>
    
</body></html> 

                                                                  


